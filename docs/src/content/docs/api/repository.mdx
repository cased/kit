---
title: Repository API
---

import { Aside } from '@astrojs/starlight/components';

This page details the methods and properties of the central `kit.Repository` class.

## Initialization

```python
from kit import Repository

# Initialize with a local path
local_repo = Repository("/path/to/your/local/project")

# Initialize with a remote URL (requires git)
# remote_repo = Repository("https://github.com/user/repo.git") 

# Initialize at a specific commit, tag, or branch
# versioned_repo = Repository("https://github.com/user/repo.git", ref="v1.2.3")
```

## Core Methods

*   `index()`: Analyzes the repository.
*   `get_file_tree()`: Returns the file tree structure.
*   `get_file_content(file_path)`: Reads and returns the content of a specified file.
*   `extract_symbols(path)`: Extracts code symbols.
*   `search_semantic(query)`: Performs semantic search.
*   `get_summarizer()`: Gets the code summarizer.

## Git Metadata Properties

*   `current_sha`: Full commit SHA (40 characters)
*   `current_sha_short`: Short commit SHA (7 characters)
*   `current_branch`: Current branch name (None if detached HEAD)
*   `remote_url`: Remote origin URL

## Creating a `Repository` Instance

To start using `kit`, first create an instance of the `Repository` class. This points `kit` to the codebase you want to analyze.

```python
from kit import Repository

# For a local directory
repository_instance = Repository(path_or_url="/path/to/local/project")

# For a remote Git repository (public or private)
# repository_instance = Repository(
#     path_or_url="https://github.com/owner/repo-name", 
#     github_token="YOUR_GITHUB_TOKEN",  # Optional: For private repos
#     cache_dir="/path/to/cache",        # Optional: For caching clones
#     ref="v1.2.3"                       # Optional: Specific commit, tag, or branch
# )
```

**Parameters:**

*   `path_or_url` (str): The path to a local directory or the URL of a remote Git repository.
*   `github_token` (Optional[str]): A GitHub personal access token required for cloning private repositories. Defaults to `None`.
*   `cache_dir` (Optional[str]): Path to a directory for caching cloned repositories. Defaults to a system temporary directory.
*   `ref` (Optional[str]): Git reference (commit SHA, tag, or branch) to checkout. For remote repositories, this determines which version to clone. For local repositories, this will checkout the specified ref. Defaults to `None`.

Once you have a `repository` object, you can call the following methods on it:

## `repository.get_file_tree()`

Returns the file tree structure of the repository.

```python
repository.get_file_tree() -> List[Dict[str, Any]]
```

**Returns:**

*   `List[Dict[str, Any]]`: A list of dictionaries, where each dictionary represents a file or directory with keys like `path`, `name`, `is_dir`, `size`.

## `repository.get_file_content()`

Reads and returns the content of a specified file within the repository as a string.

```python
repository.get_file_content(file_path: str) -> str
```

**Parameters:**

*   `file_path` (str): The path to the file, relative to the repository root.

**Returns:**

*   `str`: The content of the file.

**Raises:**

*   `FileNotFoundError`: If the file does not exist at the specified path.
*   `IOError`: If any other I/O error occurs during file reading.

## `repository.extract_symbols()`

Extracts code symbols (functions, classes, variables, etc.) from the repository.

```python
repository.extract_symbols(file_path: Optional[str] = None) -> List[Dict[str, Any]]
```

**Parameters:**

*   `file_path` (Optional[str]): If provided, extracts symbols only from this specific file path relative to the repo root. If `None`, extracts symbols from all supported files in the repository. Defaults to `None`.

**Returns:**

*   `List[Dict[str, Any]]`: A list of dictionaries, each representing a symbol with keys like `name`, `type`, `file`, `line_start`, `line_end`, `code`.

## `repository.search_text()`

Searches for literal text or regex patterns within files.

```python
repository.search_text(query: str, file_pattern: str = "*.py") -> List[Dict[str, Any]]
```

**Parameters:**

*   `query` (str): The text or regex pattern to search for.
*   `file_pattern` (str): A glob pattern to filter files to search within. Defaults to `"*.py"`.

**Returns:**

*   `List[Dict[str, Any]]`: A list of dictionaries representing search matches, with keys like `file`, `line_number`, `line_content`.

## `repository.chunk_file_by_lines()`

Chunks a file's content based on line count.

```python
repository.chunk_file_by_lines(file_path: str, max_lines: int = 50) -> List[str]
```

**Parameters:**

*   `file_path` (str): The path to the file (relative to repo root) to chunk.
*   `max_lines` (int): The maximum number of lines per chunk. Defaults to `50`.

**Returns:**

*   `List[str]`: A list of strings, where each string is a chunk of the file content.

## `repository.chunk_file_by_symbols()`