---
title: Repository API
---

import { Aside } from '@astrojs/starlight/components';

This page details the methods and properties of the central `kit.Repository` class.

## Initialization

```python
from kit import Repository

# Initialize with a local path
local_repo = Repository("/path/to/your/local/project")

# Initialize with a remote URL (requires git)
# remote_repo = Repository("https://github.com/user/repo.git") 
```

## Core Methods

*   `index()`: Analyzes the repository.
*   `get_file_tree()`: Returns the file tree structure.
*   `get_file_content(file_path)`: Reads and returns the content of a specified file.
*   `extract_symbols(path)`: Extracts code symbols.
*   `search_semantic(query)`: Performs semantic search.
*   `get_summarizer()`: Gets the code summarizer.

## Creating a `Repository` Instance

To start using `kit`, first create an instance of the `Repository` class. This points `kit` to the codebase you want to analyze.

```python
from kit import Repository

# For a local directory
repository_instance = Repository(path_or_url="/path/to/local/project")

# For a remote Git repository (public or private)
# repository_instance = Repository(
#     path_or_url="https://github.com/owner/repo-name", 
#     github_token="YOUR_GITHUB_TOKEN",  # Optional: For private repos
#     cache_dir="/path/to/cache",       # Optional: For caching clones
#     revision="v1.0.0"                # Optional: Specific tag, branch or commit
# )
```

**Parameters:**

*   `path_or_url` (str): The path to a local directory or the URL of a remote Git repository.
*   `github_token` (Optional[str]): A GitHub personal access token required for cloning private repositories. Defaults to `None`.
*   `cache_dir` (Optional[str]): Path to a directory for caching cloned repositories. Defaults to a system temporary directory.
*   `revision` (Optional[str]): A specific git revision (tag, branch name or commit SHA) to checkout. Use `@SHA` format for commit SHAs. Defaults to `None` (uses the default branch).

Once you have a `repository` object, you can call the following methods on it:

## `repository.get_file_tree()`

Returns the file tree structure of the repository.

```python
repository.get_file_tree() -> List[Dict[str, Any]]
```

**Returns:**

*   `List[Dict[str, Any]]`: A list of dictionaries, where each dictionary represents a file or directory with keys like `path`, `name`, `is_dir`, `size`.

## `repository.get_file_content()`

Reads and returns the content of a specified file within the repository as a string.

```python
repository.get_file_content(file_path: str) -> str
```

**Parameters:**

*   `file_path` (str): The path to the file, relative to the repository root.

**Returns:**

*   `str`: The content of the file.

**Raises:**

*   `FileNotFoundError`: If the file does not exist at the specified path.
*   `IOError`: If any other I/O error occurs during file reading.

## `repository.extract_symbols()`

Extracts code symbols (functions, classes, variables, etc.) from the repository.

```python
repository.extract_symbols(file_path: Optional[str] = None) -> List[Dict[str, Any]]
```

**Parameters:**

*   `file_path` (Optional[str]): If provided, extracts symbols only from this specific file path relative to the repo root. If `None`, extracts symbols from all supported files in the repository. Defaults to `None`.

**Returns:**

*   `List[Dict[str, Any]]`: A list of dictionaries, each representing a symbol with keys like `name`, `type`, `file`, `line_start`, `line_end`, `code_snippet`.

## `repository.search_text()`

Searches for literal text or regex patterns within files.

```python
repository.search_text(query: str, file_pattern: str = "*.py") -> List[Dict[str, Any]]
```

**Parameters:**

*   `query` (str): The text or regex pattern to search for.
*   `file_pattern` (str): A glob pattern to filter files to search within. Defaults to `"*.py"`.

**Returns:**

*   `List[Dict[str, Any]]`: A list of dictionaries representing search matches, with keys like `file`, `line_number`, `line_content`.

## `repository.chunk_file_by_lines()`

Chunks a file's content based on line count.

```python
repository.chunk_file_by_lines(file_path: str, max_lines: int = 50) -> List[str]
```

**Parameters:**

*   `file_path` (str): The path to the file (relative to repo root) to chunk.
*   `max_lines` (int): The maximum number of lines per chunk. Defaults to `50`.

**Returns:**

*   `List[str]`: A list of strings, where each string is a chunk of the file content.

## `repository.chunk_file_by_symbols()`

Chunks a file's content based on its top-level symbols (functions, classes).

```python
repository.chunk_file_by_symbols(file_path: str) -> List[Dict[str, Any]]
```

**Parameters:**

*   `file_path` (str): The path to the file (relative to repo root) to chunk.

**Returns:**

*   `List[Dict[str, Any]]`: A list of dictionaries, each representing a symbol chunk with keys like `name`, `type`, `code_snippet`.

## `repository.extract_context_around_line()`

Extracts the surrounding code context (typically the containing function or class) for a specific line number.

```python
repository.extract_context_around_line(file_path: str, line: int) -> Optional[Dict[str, Any]]
```

**Parameters:**

*   `file_path` (str): The path to the file (relative to repo root).
*   `line` (int): The (0-based) line number to find context for.

**Returns:**

*   `